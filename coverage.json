{"meta": {"format": 3, "version": "7.10.6", "timestamp": "2025-12-25T23:06:14.401774", "branch_coverage": false, "show_contexts": false}, "files": {"src/ha_mcp/auth/__init__.py": {"executed_lines": [1, 8, 10], "summary": {"covered_lines": 2, "num_statements": 2, "percent_covered": 100.0, "percent_covered_display": "100", "missing_lines": 0, "excluded_lines": 0}, "missing_lines": [], "excluded_lines": [], "functions": {"": {"executed_lines": [1, 8, 10], "summary": {"covered_lines": 2, "num_statements": 2, "percent_covered": 100.0, "percent_covered_display": "100", "missing_lines": 0, "excluded_lines": 0}, "missing_lines": [], "excluded_lines": []}}, "classes": {"": {"executed_lines": [1, 8, 10], "summary": {"covered_lines": 2, "num_statements": 2, "percent_covered": 100.0, "percent_covered_display": "100", "missing_lines": 0, "excluded_lines": 0}, "missing_lines": [], "excluded_lines": []}}}, "src/ha_mcp/auth/consent_form.py": {"executed_lines": [1, 9, 31, 32, 34, 35, 36, 42, 400, 411], "summary": {"covered_lines": 9, "num_statements": 9, "percent_covered": 100.0, "percent_covered_display": "100", "missing_lines": 0, "excluded_lines": 0}, "missing_lines": [], "excluded_lines": [], "functions": {"create_consent_html": {"executed_lines": [31, 32, 34, 35, 36, 42], "summary": {"covered_lines": 6, "num_statements": 6, "percent_covered": 100.0, "percent_covered_display": "100", "missing_lines": 0, "excluded_lines": 0}, "missing_lines": [], "excluded_lines": []}, "create_error_html": {"executed_lines": [411], "summary": {"covered_lines": 1, "num_statements": 1, "percent_covered": 100.0, "percent_covered_display": "100", "missing_lines": 0, "excluded_lines": 0}, "missing_lines": [], "excluded_lines": []}, "": {"executed_lines": [1, 9, 400], "summary": {"covered_lines": 2, "num_statements": 2, "percent_covered": 100.0, "percent_covered_display": "100", "missing_lines": 0, "excluded_lines": 0}, "missing_lines": [], "excluded_lines": []}}, "classes": {"": {"executed_lines": [1, 9, 31, 32, 34, 35, 36, 42, 400, 411], "summary": {"covered_lines": 9, "num_statements": 9, "percent_covered": 100.0, "percent_covered_display": "100", "missing_lines": 0, "excluded_lines": 0}, "missing_lines": [], "excluded_lines": []}}}, "src/ha_mcp/auth/provider.py": {"executed_lines": [1, 9, 10, 11, 12, 13, 14, 16, 17, 18, 19, 27, 28, 29, 30, 31, 33, 39, 41, 44, 45, 46, 49, 50, 52, 53, 54, 55, 57, 59, 66, 67, 81, 102, 103, 109, 110, 112, 122, 123, 124, 125, 128, 131, 134, 135, 138, 139, 141, 143, 150, 151, 156, 157, 162, 164, 166, 167, 168, 170, 172, 173, 174, 175, 176, 177, 179, 180, 181, 183, 193, 198, 200, 232, 233, 234, 238, 239, 249, 252, 257, 258, 260, 262, 264, 267, 272, 273, 274, 275, 276, 280, 283, 284, 286, 295, 301, 302, 308, 311, 323, 324, 326, 327, 329, 381, 483, 494, 495, 497, 498, 506, 507, 509, 512, 516, 517, 518, 523, 526, 528, 529, 536, 550, 554, 560, 562, 566, 567, 569, 570, 573, 574, 582, 588, 596, 599, 600, 602, 604, 616, 630, 638, 639, 640, 646, 650, 651, 652, 657, 660, 661, 663, 664, 667, 675, 682, 683, 685, 693, 702, 703, 704, 706, 710, 721, 723, 725, 729, 739, 740, 741, 743, 744, 749, 751, 753, 754, 756, 769, 771, 783, 784, 785, 786], "summary": {"covered_lines": 182, "num_statements": 291, "percent_covered": 62.54295532646048, "percent_covered_display": "63", "missing_lines": 109, "excluded_lines": 0}, "missing_lines": [152, 153, 178, 202, 205, 214, 217, 220, 221, 222, 225, 226, 227, 229, 281, 296, 331, 332, 334, 335, 343, 344, 345, 354, 355, 356, 364, 374, 379, 383, 384, 386, 387, 388, 389, 391, 392, 400, 401, 402, 410, 412, 413, 419, 425, 428, 429, 430, 436, 442, 443, 447, 450, 451, 453, 454, 455, 457, 468, 471, 474, 480, 481, 510, 513, 519, 520, 521, 530, 531, 532, 533, 534, 540, 541, 542, 543, 544, 545, 546, 547, 548, 555, 563, 575, 620, 621, 622, 623, 624, 625, 626, 627, 628, 641, 647, 653, 654, 730, 731, 733, 734, 735, 736, 737, 745, 746, 747, 752], "excluded_lines": [], "functions": {"HomeAssistantCredentials.__init__": {"executed_lines": [53, 54, 55], "summary": {"covered_lines": 3, "num_statements": 3, "percent_covered": 100.0, "percent_covered_display": "100", "missing_lines": 0, "excluded_lines": 0}, "missing_lines": [], "excluded_lines": []}, "HomeAssistantCredentials.to_dict": {"executed_lines": [59], "summary": {"covered_lines": 1, "num_statements": 1, "percent_covered": 100.0, "percent_covered_display": "100", "missing_lines": 0, "excluded_lines": 0}, "missing_lines": [], "excluded_lines": []}, "HomeAssistantOAuthProvider.__init__": {"executed_lines": [102, 103, 109, 110, 112, 122, 123, 124, 125, 128, 131, 134, 135, 138, 139, 141], "summary": {"covered_lines": 16, "num_statements": 16, "percent_covered": 100.0, "percent_covered_display": "100", "missing_lines": 0, "excluded_lines": 0}, "missing_lines": [], "excluded_lines": []}, "HomeAssistantOAuthProvider._get_or_create_encryption_key": {"executed_lines": [150, 151, 156, 157, 162], "summary": {"covered_lines": 5, "num_statements": 7, "percent_covered": 71.42857142857143, "percent_covered_display": "71", "missing_lines": 2, "excluded_lines": 0}, "missing_lines": [152, 153], "excluded_lines": []}, "HomeAssistantOAuthProvider._encrypt_credentials": {"executed_lines": [166, 167, 168], "summary": {"covered_lines": 3, "num_statements": 3, "percent_covered": 100.0, "percent_covered_display": "100", "missing_lines": 0, "excluded_lines": 0}, "missing_lines": [], "excluded_lines": []}, "HomeAssistantOAuthProvider._decrypt_credentials": {"executed_lines": [172, 173, 174, 175, 176, 177, 179, 180, 181], "summary": {"covered_lines": 9, "num_statements": 10, "percent_covered": 90.0, "percent_covered_display": "90", "missing_lines": 1, "excluded_lines": 0}, "missing_lines": [178], "excluded_lines": []}, "HomeAssistantOAuthProvider.get_routes": {"executed_lines": [193, 198, 200, 232, 233, 234, 238, 239, 249, 252, 257, 258], "summary": {"covered_lines": 12, "num_statements": 12, "percent_covered": 100.0, "percent_covered_display": "100", "missing_lines": 0, "excluded_lines": 0}, "missing_lines": [], "excluded_lines": []}, "HomeAssistantOAuthProvider.get_routes.enhanced_metadata_handler": {"executed_lines": [], "summary": {"covered_lines": 0, "num_statements": 11, "percent_covered": 0.0, "percent_covered_display": "0", "missing_lines": 11, "excluded_lines": 0}, "missing_lines": [202, 205, 214, 217, 220, 221, 222, 225, 226, 227, 229], "excluded_lines": []}, "HomeAssistantOAuthProvider.get_client": {"executed_lines": [262], "summary": {"covered_lines": 1, "num_statements": 1, "percent_covered": 100.0, "percent_covered_display": "100", "missing_lines": 0, "excluded_lines": 0}, "missing_lines": [], "excluded_lines": []}, "HomeAssistantOAuthProvider.register_client": {"executed_lines": [267, 272, 273, 274, 275, 276, 280, 283, 284], "summary": {"covered_lines": 9, "num_statements": 10, "percent_covered": 90.0, "percent_covered_display": "90", "missing_lines": 1, "excluded_lines": 0}, "missing_lines": [281], "excluded_lines": []}, "HomeAssistantOAuthProvider.authorize": {"executed_lines": [295, 301, 302, 308, 311, 323, 324, 326, 327], "summary": {"covered_lines": 9, "num_statements": 10, "percent_covered": 90.0, "percent_covered_display": "90", "missing_lines": 1, "excluded_lines": 0}, "missing_lines": [296], "excluded_lines": []}, "HomeAssistantOAuthProvider._consent_get": {"executed_lines": [], "summary": {"covered_lines": 0, "num_statements": 13, "percent_covered": 0.0, "percent_covered_display": "0", "missing_lines": 13, "excluded_lines": 0}, "missing_lines": [331, 332, 334, 335, 343, 344, 345, 354, 355, 356, 364, 374, 379], "excluded_lines": []}, "HomeAssistantOAuthProvider._consent_post": {"executed_lines": [], "summary": {"covered_lines": 0, "num_statements": 34, "percent_covered": 0.0, "percent_covered_display": "0", "missing_lines": 34, "excluded_lines": 0}, "missing_lines": [383, 384, 386, 387, 388, 389, 391, 392, 400, 401, 402, 410, 412, 413, 419, 425, 428, 429, 430, 436, 442, 443, 447, 450, 451, 453, 454, 455, 457, 468, 471, 474, 480, 481], "excluded_lines": []}, "HomeAssistantOAuthProvider._validate_ha_credentials": {"executed_lines": [494, 495, 497, 498, 506, 507, 509, 512, 516, 517, 518, 523, 526, 528, 529], "summary": {"covered_lines": 15, "num_statements": 25, "percent_covered": 60.0, "percent_covered_display": "60", "missing_lines": 10, "excluded_lines": 0}, "missing_lines": [510, 513, 519, 520, 521, 530, 531, 532, 533, 534], "excluded_lines": []}, "HomeAssistantOAuthProvider.load_authorization_code": {"executed_lines": [], "summary": {"covered_lines": 0, "num_statements": 9, "percent_covered": 0.0, "percent_covered_display": "0", "missing_lines": 9, "excluded_lines": 0}, "missing_lines": [540, 541, 542, 543, 544, 545, 546, 547, 548], "excluded_lines": []}, "HomeAssistantOAuthProvider.exchange_authorization_code": {"executed_lines": [554, 560, 562, 566, 567, 569, 570, 573, 574, 582, 588, 596, 599, 600, 602, 604], "summary": {"covered_lines": 16, "num_statements": 19, "percent_covered": 84.21052631578948, "percent_covered_display": "84", "missing_lines": 3, "excluded_lines": 0}, "missing_lines": [555, 563, 575], "excluded_lines": []}, "HomeAssistantOAuthProvider.load_refresh_token": {"executed_lines": [], "summary": {"covered_lines": 0, "num_statements": 9, "percent_covered": 0.0, "percent_covered_display": "0", "missing_lines": 9, "excluded_lines": 0}, "missing_lines": [620, 621, 622, 623, 624, 625, 626, 627, 628], "excluded_lines": []}, "HomeAssistantOAuthProvider.exchange_refresh_token": {"executed_lines": [638, 639, 640, 646, 650, 651, 652, 657, 660, 661, 663, 664, 667, 675, 682, 683, 685], "summary": {"covered_lines": 17, "num_statements": 21, "percent_covered": 80.95238095238095, "percent_covered_display": "81", "missing_lines": 4, "excluded_lines": 0}, "missing_lines": [641, 647, 653, 654], "excluded_lines": []}, "HomeAssistantOAuthProvider.load_access_token": {"executed_lines": [702, 703, 704, 706, 710], "summary": {"covered_lines": 5, "num_statements": 5, "percent_covered": 100.0, "percent_covered_display": "100", "missing_lines": 0, "excluded_lines": 0}, "missing_lines": [], "excluded_lines": []}, "HomeAssistantOAuthProvider.verify_token": {"executed_lines": [723], "summary": {"covered_lines": 1, "num_statements": 1, "percent_covered": 100.0, "percent_covered_display": "100", "missing_lines": 0, "excluded_lines": 0}, "missing_lines": [], "excluded_lines": []}, "HomeAssistantOAuthProvider._revoke_internal": {"executed_lines": [729, 739, 740, 741, 743, 744], "summary": {"covered_lines": 6, "num_statements": 16, "percent_covered": 37.5, "percent_covered_display": "38", "missing_lines": 10, "excluded_lines": 0}, "missing_lines": [730, 731, 733, 734, 735, 736, 737, 745, 746, 747], "excluded_lines": []}, "HomeAssistantOAuthProvider.revoke_token": {"executed_lines": [751, 753, 754], "summary": {"covered_lines": 3, "num_statements": 4, "percent_covered": 75.0, "percent_covered_display": "75", "missing_lines": 1, "excluded_lines": 0}, "missing_lines": [752], "excluded_lines": []}, "HomeAssistantOAuthProvider.get_ha_credentials": {"executed_lines": [769], "summary": {"covered_lines": 1, "num_statements": 1, "percent_covered": 100.0, "percent_covered_display": "100", "missing_lines": 0, "excluded_lines": 0}, "missing_lines": [], "excluded_lines": []}, "HomeAssistantOAuthProvider.get_ha_credentials_for_token": {"executed_lines": [783, 784, 785, 786], "summary": {"covered_lines": 4, "num_statements": 4, "percent_covered": 100.0, "percent_covered_display": "100", "missing_lines": 0, "excluded_lines": 0}, "missing_lines": [], "excluded_lines": []}, "": {"executed_lines": [1, 9, 10, 11, 12, 13, 14, 16, 17, 18, 19, 27, 28, 29, 30, 31, 33, 39, 41, 44, 45, 46, 49, 50, 52, 57, 66, 67, 81, 143, 164, 170, 183, 260, 264, 286, 329, 381, 483, 536, 550, 616, 630, 693, 721, 725, 749, 756, 771], "summary": {"covered_lines": 46, "num_statements": 46, "percent_covered": 100.0, "percent_covered_display": "100", "missing_lines": 0, "excluded_lines": 0}, "missing_lines": [], "excluded_lines": []}}, "classes": {"HomeAssistantCredentials": {"executed_lines": [53, 54, 55, 59], "summary": {"covered_lines": 4, "num_statements": 4, "percent_covered": 100.0, "percent_covered_display": "100", "missing_lines": 0, "excluded_lines": 0}, "missing_lines": [], "excluded_lines": []}, "HomeAssistantOAuthProvider": {"executed_lines": [102, 103, 109, 110, 112, 122, 123, 124, 125, 128, 131, 134, 135, 138, 139, 141, 150, 151, 156, 157, 162, 166, 167, 168, 172, 173, 174, 175, 176, 177, 179, 180, 181, 193, 198, 200, 232, 233, 234, 238, 239, 249, 252, 257, 258, 262, 267, 272, 273, 274, 275, 276, 280, 283, 284, 295, 301, 302, 308, 311, 323, 324, 326, 327, 494, 495, 497, 498, 506, 507, 509, 512, 516, 517, 518, 523, 526, 528, 529, 554, 560, 562, 566, 567, 569, 570, 573, 574, 582, 588, 596, 599, 600, 602, 604, 638, 639, 640, 646, 650, 651, 652, 657, 660, 661, 663, 664, 667, 675, 682, 683, 685, 702, 703, 704, 706, 710, 723, 729, 739, 740, 741, 743, 744, 751, 753, 754, 769, 783, 784, 785, 786], "summary": {"covered_lines": 132, "num_statements": 241, "percent_covered": 54.77178423236514, "percent_covered_display": "55", "missing_lines": 109, "excluded_lines": 0}, "missing_lines": [152, 153, 178, 202, 205, 214, 217, 220, 221, 222, 225, 226, 227, 229, 281, 296, 331, 332, 334, 335, 343, 344, 345, 354, 355, 356, 364, 374, 379, 383, 384, 386, 387, 388, 389, 391, 392, 400, 401, 402, 410, 412, 413, 419, 425, 428, 429, 430, 436, 442, 443, 447, 450, 451, 453, 454, 455, 457, 468, 471, 474, 480, 481, 510, 513, 519, 520, 521, 530, 531, 532, 533, 534, 540, 541, 542, 543, 544, 545, 546, 547, 548, 555, 563, 575, 620, 621, 622, 623, 624, 625, 626, 627, 628, 641, 647, 653, 654, 730, 731, 733, 734, 735, 736, 737, 745, 746, 747, 752], "excluded_lines": []}, "": {"executed_lines": [1, 9, 10, 11, 12, 13, 14, 16, 17, 18, 19, 27, 28, 29, 30, 31, 33, 39, 41, 44, 45, 46, 49, 50, 52, 57, 66, 67, 81, 143, 164, 170, 183, 260, 264, 286, 329, 381, 483, 536, 550, 616, 630, 693, 721, 725, 749, 756, 771], "summary": {"covered_lines": 46, "num_statements": 46, "percent_covered": 100.0, "percent_covered_display": "100", "missing_lines": 0, "excluded_lines": 0}, "missing_lines": [], "excluded_lines": []}}}}, "totals": {"covered_lines": 193, "num_statements": 302, "percent_covered": 63.90728476821192, "percent_covered_display": "64", "missing_lines": 109, "excluded_lines": 0}}