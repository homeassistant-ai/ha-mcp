---
import Layout from '../layouts/Layout.astro';

const base = import.meta.env.BASE_URL;

const withBase = (path: string) => {
  const cleanPath = path.startsWith('/') ? path : `/${path}`;
  return `${base}${cleanPath}`;
};
---

<Layout title="Home Assistant MCP Server">
  <!-- Navigation Bar -->
  <nav class="sticky top-0 z-50 bg-slate-900/95 backdrop-blur border-b border-slate-800">
    <div class="container mx-auto px-4 max-w-5xl">
      <div class="flex items-center justify-between h-14">
        <a href={withBase('/')} class="flex items-center gap-2">
          <img src={withBase('/icon.svg')} alt="Home Assistant MCP" class="h-8 w-8" />
          <span class="font-semibold text-white text-lg hidden sm:inline">Home Assistant MCP Server</span>
          <span class="font-semibold text-white text-lg sm:hidden">ha-mcp</span>
        </a>
        <div class="flex items-center gap-6">
          <a href={withBase('/')} class="text-sm text-blue-400 font-medium">Home</a>
          <a href={withBase('/setup')} class="text-sm text-slate-300 hover:text-white transition-colors">Setup</a>
          <a href={withBase('/faq')} class="text-sm text-slate-300 hover:text-white transition-colors">FAQ</a>
        </div>
      </div>
    </div>
  </nav>

  <div class="container mx-auto px-4 py-12 max-w-5xl">
    <!-- Hero Section -->
    <header class="text-center mb-16">
      <img src={withBase('/icon.svg')} alt="Home Assistant MCP Server" class="w-32 mx-auto mb-6" />
      <h1 class="text-4xl md:text-5xl font-bold text-white mb-4">Home Assistant MCP Server</h1>
      <p class="text-xl text-slate-400 max-w-2xl mx-auto mb-8">
        A comprehensive Model Context Protocol (MCP) server that enables AI assistants to interact with Home Assistant.
        Control smart home devices, query states, execute services and manage automations using natural language.
      </p>

      <!-- Badges -->
      <div class="flex flex-wrap justify-center gap-2 mb-8">
        <img src="https://img.shields.io/badge/tools-80+-blue" alt="80+ Tools" class="h-6" />
        <img src="https://img.shields.io/github/v/release/homeassistant-ai/ha-mcp" alt="Release" class="h-6" />
        <img src="https://img.shields.io/github/actions/workflow/status/homeassistant-ai/ha-mcp/e2e-tests.yml?branch=master&label=E2E%20Tests" alt="E2E Tests" class="h-6" />
        <img src="https://img.shields.io/github/license/homeassistant-ai/ha-mcp.svg" alt="License" class="h-6" />
      </div>

      <!-- CTA Buttons -->
      <div class="flex flex-wrap justify-center gap-4">
        <a href={withBase('/setup')} class="px-8 py-3 bg-blue-600 hover:bg-blue-500 text-white font-semibold rounded-xl transition-colors shadow-lg shadow-blue-900/30">
          Get Started
        </a>
        <a href="https://github.com/homeassistant-ai/ha-mcp" class="px-8 py-3 bg-slate-700 hover:bg-slate-600 text-white font-semibold rounded-xl transition-colors">
          View on GitHub
        </a>
      </div>
    </header>

    <!-- Demo GIF -->
    <div class="mb-16 max-w-3xl mx-auto rounded-2xl overflow-hidden border border-slate-700 shadow-2xl">
      <img src="https://raw.githubusercontent.com/homeassistant-ai/ha-mcp/master/docs/img/demo.webp" alt="Demo with Claude Desktop" class="w-full" />
    </div>

    <!-- Quick Start Section -->
    <section class="mb-16">
      <h2 class="text-2xl font-bold text-white mb-6 text-center">Quick Start (~5 min)</h2>
      <p class="text-slate-400 text-center mb-8">No paid subscription required. Just copy-paste one command.</p>

      <div class="grid md:grid-cols-2 gap-6 max-w-3xl mx-auto">
        <!-- macOS -->
        <div class="bg-slate-800/50 rounded-xl border border-slate-700 p-6">
          <div class="flex items-center gap-3 mb-4">
            <span class="text-4xl">ğŸ</span>
            <h3 class="text-xl font-semibold text-white">macOS</h3>
          </div>
          <ol class="text-slate-300 space-y-3 text-sm mb-4">
            <li>1. Sign in to <a href="https://claude.ai" class="text-blue-400 hover:underline">claude.ai</a></li>
            <li>2. Open Terminal and run:</li>
          </ol>
          <pre class="bg-slate-900 p-3 rounded-lg text-sm overflow-x-auto mb-4"><code class="text-green-400">curl -LsSf https://raw.githubusercontent.com/homeassistant-ai/ha-mcp/master/scripts/install-macos.sh | sh</code></pre>
          <ol class="text-slate-300 space-y-2 text-sm" start="3">
            <li>3. <a href="https://claude.ai/download" class="text-blue-400 hover:underline">Download Claude Desktop</a></li>
            <li>4. Ask Claude: <em>"Can you see my Home Assistant?"</em></li>
          </ol>
        </div>

        <!-- Windows -->
        <div class="bg-slate-800/50 rounded-xl border border-slate-700 p-6">
          <div class="flex items-center gap-3 mb-4">
            <span class="text-4xl">ğŸªŸ</span>
            <h3 class="text-xl font-semibold text-white">Windows</h3>
          </div>
          <ol class="text-slate-300 space-y-3 text-sm mb-4">
            <li>1. Sign in to <a href="https://claude.ai" class="text-blue-400 hover:underline">claude.ai</a></li>
            <li>2. Open PowerShell and run:</li>
          </ol>
          <pre class="bg-slate-900 p-3 rounded-lg text-sm overflow-x-auto mb-4"><code class="text-green-400">irm https://raw.githubusercontent.com/homeassistant-ai/ha-mcp/master/scripts/install-windows.ps1 | iex</code></pre>
          <ol class="text-slate-300 space-y-2 text-sm" start="3">
            <li>3. <a href="https://claude.ai/download" class="text-blue-400 hover:underline">Download Claude Desktop</a></li>
            <li>4. Ask Claude: <em>"Can you see my Home Assistant?"</em></li>
          </ol>
        </div>
      </div>

      <p class="text-center mt-6 text-slate-500">
        Need more options? <a href={withBase('/setup')} class="text-blue-400 hover:underline">Use the Setup Wizard</a>
      </p>
    </section>

    <!-- What Can You Do Section -->
    <section class="mb-16">
      <h2 class="text-2xl font-bold text-white mb-6 text-center">What Can You Do With It?</h2>
      <p class="text-slate-400 text-center mb-8">Just talk to Claude naturally. Here are some examples:</p>

      <div class="grid gap-4 max-w-3xl mx-auto">
        <div class="flex gap-4 items-start bg-slate-800/30 rounded-xl p-4 border border-slate-700/50">
          <span class="text-2xl flex-shrink-0">ğŸ’¬</span>
          <div>
            <p class="text-white font-medium mb-1">"Create an automation that turns on the porch light at sunset"</p>
            <p class="text-slate-400 text-sm">Creates the automation with proper triggers and actions</p>
          </div>
        </div>
        <div class="flex gap-4 items-start bg-slate-800/30 rounded-xl p-4 border border-slate-700/50">
          <span class="text-2xl flex-shrink-0">ğŸ’¬</span>
          <div>
            <p class="text-white font-medium mb-1">"Add a weather card to my dashboard"</p>
            <p class="text-slate-400 text-sm">Updates your Lovelace dashboard with the new card</p>
          </div>
        </div>
        <div class="flex gap-4 items-start bg-slate-800/30 rounded-xl p-4 border border-slate-700/50">
          <span class="text-2xl flex-shrink-0">ğŸ’¬</span>
          <div>
            <p class="text-white font-medium mb-1">"The motion sensor automation isn't working, debug it"</p>
            <p class="text-slate-400 text-sm">Analyzes execution traces, identifies the issue, suggests fixes</p>
          </div>
        </div>
        <div class="flex gap-4 items-start bg-slate-800/30 rounded-xl p-4 border border-slate-700/50">
          <span class="text-2xl flex-shrink-0">ğŸ’¬</span>
          <div>
            <p class="text-white font-medium mb-1">"Create a script that sets movie mode: dim lights, close blinds, turn on TV"</p>
            <p class="text-slate-400 text-sm">Creates a reusable script with the sequence of actions</p>
          </div>
        </div>
      </div>
    </section>

    <!-- Features Section -->
    <section class="mb-16">
      <h2 class="text-2xl font-bold text-white mb-6 text-center">Features</h2>

      <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-4">
        <div class="bg-slate-800/30 rounded-xl p-5 border border-slate-700/50">
          <h3 class="font-semibold text-white mb-2 flex items-center gap-2">
            <span>ğŸ”</span> Search
          </h3>
          <p class="text-slate-400 text-sm">Fuzzy entity search, deep config search, system overview</p>
        </div>
        <div class="bg-slate-800/30 rounded-xl p-5 border border-slate-700/50">
          <h3 class="font-semibold text-white mb-2 flex items-center gap-2">
            <span>ğŸ </span> Control
          </h3>
          <p class="text-slate-400 text-sm">Any service, bulk device control, real-time states</p>
        </div>
        <div class="bg-slate-800/30 rounded-xl p-5 border border-slate-700/50">
          <h3 class="font-semibold text-white mb-2 flex items-center gap-2">
            <span>ğŸ”§</span> Manage
          </h3>
          <p class="text-slate-400 text-sm">Automations, scripts, helpers, dashboards, areas, zones, groups</p>
        </div>
        <div class="bg-slate-800/30 rounded-xl p-5 border border-slate-700/50">
          <h3 class="font-semibold text-white mb-2 flex items-center gap-2">
            <span>ğŸ“Š</span> Monitor
          </h3>
          <p class="text-slate-400 text-sm">History, statistics, camera snapshots, automation traces</p>
        </div>
        <div class="bg-slate-800/30 rounded-xl p-5 border border-slate-700/50">
          <h3 class="font-semibold text-white mb-2 flex items-center gap-2">
            <span>ğŸ’¾</span> System
          </h3>
          <p class="text-slate-400 text-sm">Backup/restore, updates, add-ons, device registry</p>
        </div>
        <div class="bg-slate-800/30 rounded-xl p-5 border border-slate-700/50">
          <h3 class="font-semibold text-white mb-2 flex items-center gap-2">
            <span>ğŸ› ï¸</span> 82+ Tools
          </h3>
          <p class="text-slate-400 text-sm">Comprehensive toolset for complete HA control</p>
        </div>
      </div>
    </section>

    <!-- CTA Section -->
    <section class="text-center bg-gradient-to-br from-blue-900/30 to-slate-800/30 rounded-2xl p-10 border border-blue-800/30">
      <h2 class="text-2xl font-bold text-white mb-4">Ready to Get Started?</h2>
      <p class="text-slate-400 mb-6">Set up ha-mcp with your AI assistant in minutes</p>
      <a href={withBase('/setup')} class="inline-block px-8 py-3 bg-blue-600 hover:bg-blue-500 text-white font-semibold rounded-xl transition-colors shadow-lg shadow-blue-900/30">
        Open Setup Wizard
      </a>
    </section>

    <!-- Footer -->
    <footer class="mt-16 text-center text-slate-500 text-sm border-t border-slate-800 pt-8">
      <p class="mb-2">
        <a href="https://github.com/homeassistant-ai/ha-mcp" class="hover:text-slate-300">GitHub</a>
        <span class="mx-2">Â·</span>
        <a href="https://github.com/homeassistant-ai/ha-mcp/issues" class="hover:text-slate-300">Issues</a>
        <span class="mx-2">Â·</span>
        <a href={withBase('/faq')} class="hover:text-slate-300">FAQ</a>
        <span class="mx-2">Â·</span>
        <a href={withBase('/contribute')} class="hover:text-slate-300">Contribute</a>
      </p>
      <p class="text-slate-600">Built with FastMCP</p>
    </footer>
  </div>
</Layout>
